# HTTP协议

超文本传输协议（hypertext transport protocol），所有的WWW文件都必须遵守这个标准，服务端和客户端发送数据，需要遵守的协议，又称为报文

## HTTP协议的特点

1、HTTP协议是**基于TCP/IP**通信协议来传递数据（HTML文件，图片文件，查询结果等）

2、HTTP协议的默认端口号是**80**

3、HTTP协议是基于请求和响应的模式的协议，一次请求对应一次响应

4、HTTP协议是一种**无连接协议**，两次请求之间没有任何关系，互相不干涉

## 工作原理

1、HTTP协议工作于**客户端-服务端**架构上，浏览器作为HTTP客户端通过URL向HTTP服务器（Web服务器）发送所有请求。

2、Web根据接收到的请求，向客户端发送响应信息

## 流程

![说明: clipboard.png](https://gitee.com/yh-gh/img-bed/raw/master/202109181325030.gif)

## HTTP注意事项

1、**HTTP是无连接的**：每次连接只处理一个请求

2、**HTTP是媒体独立的**：任何类型的数据都可以通过HTTP发送，只要告诉服务器就可以

3、**HTTP是无状态的**：对于事务处理没有记忆功能，意味着如果后续的处理需要前面的信息，就必须重新传输

# HTTP消息结构

## 请求消息结构

![说明: clipboard.png](https://gitee.com/yh-gh/img-bed/raw/master/202109181325020.gif)

### 请求行（request line）

#### 格式：请求方法 URL 协议版本

* GET  /day27/servletDemo1?username=tom  HTTP/1.1

#### 请求方法：请求方式一共有7个

- GET
  - 请求参数是在请求行中的，也是在地址栏上显示的
  - 相对不安全
  - 传输数据的大小是有限制的
- POST
  - 请求参数是在请求体中的， 不会在地址栏上显示的
  - 相对安全
  - 传输数据的大小是没有限制的

### 请求头部（header）

#### 格式：请求消息头：请求消息值

* key ：value

**Accept**：浏览器可接受的MIME类型。浏览器告诉服务器，其能接收的MIME类型都有哪些

**MIME类型**（Multipurpose Internet Mail Extensions）：设定某种扩展名的文件用一种应用程序来打开的方式类型，当该扩展名文件被访问的时候,浏览器会自动使用指定应用程序来打开。响应回来的数据如果是文件的，那其实文件也是类似于Java中的数据类型的

**Referer**：包含一个URL，用户从该URL代表的页面出发访问当前请求的页面。浏览器告诉服务器，我是从何而来

- 作用
  - 防盗链
  - 统计

**User-Agent**：浏览器类型，如果Servlet返回的内容与浏览器类型有关则该值非常有用。浏览器告诉服务器，我是什么浏览器

### 空行

它的用处只是用来区分请求头和请求体的

### 请求数据（请求体）

- get：由于请求参数是在请求行的URI的后面跟着，所以并不会存储在请求体中，一般我们也会说get请求的请求体是没有的。
- post：请求参数是不在请求行中的uri后面的，是存储在请求体中的，所以post请求是有请求体的
- 多个请求参数之间是使用&分隔、连续的

## 响应消息结构

![说明: clipboard.png](https://gitee.com/yh-gh/img-bed/raw/master/202109181325901.gif)

### 状态行

格式：协议/版本号 状态码

状态码：描述此次请求和响应的状态

### 消息报头（响应头）

格式：key：value

- Content-Type:text/html;charset=utf-8：服务器告诉浏览器，响应的数据的类型是什么以及用什么编码解析该资源
- text/html：MIME类型
- location：实现重定向的响应头
- Content-Disposition：服务器告诉浏览器，应该用什么类型来解析响应回去的数据。文件的下载，需要设置该响应头

### 空行

为了区分响应头和响应体的  

### 响应正文（响应体）

相应的内容

### 常见的状态码

- 1XX：消息
  - 这一类型的状态码，代表请求已被接受，需要继续处理
  - 这类响应是临时响应，只包含状态行和某些可选的响应头信息，并以空行结束
  - 服务器接收到了客户端的请求，但是还没有接收完成，等待了一会，服务器给客户端发送的状态码
- 2XX：成功
  - 这一类型的状态码，代表请求已成功被服务器接收、理解、并接受。
  - 200：代表没问题，成功
- 3XX：重定向
  - 这类状态码代表需要客户端采取进一步的操作才能完成请求。
  - 302：重定向
    - 当我们访问服务器端的某一个资源的时候，如果响应状态吗为302，那我们就只到此资源是通过重定向返回给我们的
  - 304：缓存
    - 当我们第一次访问服务器的资源的时候，响应回来的状态是200，当我们再一次访问服务器的该资源的时候，那响应状态就是304；当我们清空缓存之后，再去访问服务器的资源的时候，响应状态码还是200，当我们再一次访问该资源，状态码又会变成304；当访问的资源被更新之后，那我们再去访问该资源的话，响应状态码会变成200
    - 如何确定资源被更新：看资源文件最后修改时间
- 4XX：请求错误
  - 这类的状态码代表了客户端看起来可能发生了错误，妨碍了服务器的处理
  - 404：资源没找到
    - 一般情况路径写错，或者资源名写错了
  - 405：没有重写doGet()或者doPost()
- 5XX：服务器错误
  - 这类状态码代表了服务器在处理请求的过程中有错误或者异常状态发生
  - 500：出现了500，说明服务器有错误，而且产生这个问题的原因有很多种情况

# GET请求结构

## 请求行

1、请求的方式--GET

2、请求的资源路径【？请求参数】

3、请求的协议版本号--HTTP/1.1

## 请求头

key：value组成，不同的键值对，代表不同的含义

# POST请求结构

## 请求行

1、请求的方式--GET

2、请求的资源路径【？请求参数】

3、请求的协议版本号--HTTP/1.1

## 请求头

key：value组成，不同的键值对，代表不同的含义

## 空行

分割请求头和请求体

## 请求体

发送给服务器的数据

# URI

![说明: clipboard.png](https://gitee.com/yh-gh/img-bed/raw/master/202109181325301.gif)

URI包括URL和URN两个类别，URL是URI的子集，所以URL一定是URI，而URI不一定是URL

**URI**：（Universal Resource Identitier）统一资源标识符，用于标识抽象或物理资源的一个紧凑的字符串

**URL**：（Universal Resource Locator）统一资源定位符，一种定位资源的主要访问机制的字符串，一个标准的URL，必须包括：protocol、host、port、path、parameter、anchor

![说明: clipboard.png](https://gitee.com/yh-gh/img-bed/raw/master/202109181325745.gif)

**URN**：（Universal Resource Name）统一资源名称，通过特定命名空间中的唯一名称或ID来标识资源